define(["require","jquery","underscore","./Vent","./collections/TodoCollection","app/FakeStatusView","app/FakeAddView","app/FakeCreateItemView","app/shim"],function(e){var t=e("jquery"),n=e("underscore"),r="NotifyJs",i,s,o,u,a,f=function(e){if(!isNullOrEmpty(e))try{e=JSON.parse(e);var t=JSON.parse(e.Payload);switch(e.Type){case"add":t.length&&t.length>=1&&s.create({Title:t[0]});break;case"remove":alert('Remove "'+e.Payload+'"');break;default:alert("Type: "+e.Type)}}catch(n){}};window.isNullOrEmpty=function(e){return n.isUndefined(e)||n.isNull(e)||n.isEmpty(e)};var l=function(e){window.external.Ready(e)},c=function(e){window.external.NotifyWPF(e)};t(function(){i=e("./Vent"),s=e("./collections/TodoCollection");var n=t(".row");o=new(e("app/FakeStatusView")),u=new(e("app/FakeAddView")),a=new(e("app/FakeCreateItemView"));var h=[o.render().$el,u.render().$el,a.render().$el];n.append(h),window[r]=f;try{l(r)}catch(p){window.external=e("app/shim"),l(r)}i.on("notifywpf",function(e,t){var n={Type:e,Payload:JSON.stringify(t)};c(JSON.stringify(n))})})});